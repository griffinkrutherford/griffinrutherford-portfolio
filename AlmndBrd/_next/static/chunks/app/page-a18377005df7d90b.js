(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4243:(e,t,s)=>{Promise.resolve().then(s.bind(s,5527))},5527:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var n=s(1133),a=s(1321),i=s(3715),r=s.n(i);function o(e){let{onZoom:t,width:s,height:i}=e,[r,o]=(0,a.useState)({x:0,y:0}),[l,c]=(0,a.useState)(!1),[d,h]=(0,a.useState)(!1);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"magnifying-glass-overlay",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",cursor:d?"none":"inherit",zIndex:10,pointerEvents:d?"auto":"none"},onMouseMove:e=>{if(!d)return;let t=e.currentTarget.getBoundingClientRect();o({x:Math.max(40,Math.min(s-40,e.clientX-t.left)),y:Math.max(40,Math.min(i-40,e.clientY-t.top))}),c(!0)},onMouseLeave:()=>{c(!1)},onClick:()=>{d&&l&&t(r.x,r.y)}}),d&&l&&(0,n.jsx)("div",{className:"magnifying-glass",style:{position:"absolute",top:r.y-40,left:r.x-40,width:"".concat(80,"px"),height:"".concat(80,"px"),borderRadius:"50%",border:"2px solid #8A2BE2",boxShadow:"0 0 10px rgba(138, 43, 226, 0.7)",pointerEvents:"none",zIndex:20,background:"rgba(0, 0, 0, 0.1)",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,n.jsxs)("div",{style:{width:"20px",height:"20px",position:"relative"},children:[(0,n.jsx)("div",{style:{position:"absolute",top:"9px",left:0,width:"100%",height:"2px",backgroundColor:"#39FF14"}}),(0,n.jsx)("div",{style:{position:"absolute",top:0,left:"9px",width:"2px",height:"100%",backgroundColor:"#39FF14"}})]})}),(0,n.jsxs)("button",{className:"magnifying-glass-toggle",onClick:()=>h(!d),style:{position:"absolute",bottom:"10px",right:"10px",zIndex:30,backgroundColor:d?"#8A2BE2":"#1a1a1a",color:"#39FF14",border:"2px solid #8A2BE2",borderRadius:"4px",padding:"5px 10px",cursor:"pointer",display:"flex",alignItems:"center",gap:"5px"},children:[(0,n.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("circle",{cx:"10",cy:"10",r:"7",stroke:"#39FF14",strokeWidth:"2"}),(0,n.jsx)("line",{x1:"15.4142",y1:"15",x2:"20.4142",y2:"20",stroke:"#39FF14",strokeWidth:"2"}),(0,n.jsx)("line",{x1:"7",y1:"10",x2:"13",y2:"10",stroke:"#39FF14",strokeWidth:"2"}),(0,n.jsx)("line",{x1:"10",y1:"7",x2:"10",y2:"13",stroke:"#39FF14",strokeWidth:"2"})]}),d?"Disable Zoom":"Enable Zoom"]})]})}function l(e){let{width:t,height:s,maxIterations:i=100,onScreenshotTaken:l}=e,c=(0,a.useRef)(null),[d,h]=(0,a.useState)(!1),[u,x]=(0,a.useState)({x:0,y:0}),[g,y]=(0,a.useState)(1),[p,m]=(0,a.useState)({x:0,y:0}),[v,f]=(0,a.useState)(!1),[b,w]=(0,a.useState)({x:0,y:0}),[j,k]=(0,a.useState)([]);(0,a.useEffect)(()=>{let e=[];for(let t=0;t<256;t++){let s=Math.floor(127*Math.sin(.3*t)+128),n=Math.floor(127*Math.sin(.3*t+2)+128),a=Math.floor(127*Math.sin(.3*t+4)+128);e.push("rgb(".concat(s,", ").concat(n,", ").concat(a,")"))}k(e)},[]);let N=(e,n)=>{let a=4/g,i=4/g,r=u.x,o=u.y;return{real:r+(e-t/2)/t*a+p.x/t*a,imag:o+(n-s/2)/s*i+p.y/s*i}},A=(e,t,s)=>{let n=0,a=0,i=0;for(;n*n+a*a<4&&i<s;){let s=n*n-a*a+e,r=2*n*a+t;n=s,a=r,i++}return i===s?-1:i+1-Math.log(Math.log(Math.sqrt(n*n+a*a)))/Math.log(2)},M=()=>{let e=c.current;if(!e)return;let n=e.getContext("2d");if(!n)return;h(!0);let a=n.createImageData(t,s),r=a.data;for(let e=0;e<s;e++)for(let s=0;s<t;s++){let{real:n,imag:a}=N(s,e),o=A(n,a,i),l=(e*t+s)*4;if(-1===o)r[l]=0,r[l+1]=0,r[l+2]=0,r[l+3]=255;else{let[e,t,s]=j[Math.floor(o%256)].match(/\d+/g).map(Number);r[l]=e,r[l+1]=t,r[l+2]=s,r[l+3]=255}}n.putImageData(a,0,0),h(!1)};(0,a.useEffect)(()=>{j.length>0&&M()},[u,g,p,i,j]);let I=(0,a.useCallback)(e=>{switch(e.key){case"ArrowUp":m(e=>({x:e.x,y:e.y+10})),e.preventDefault();break;case"ArrowDown":m(e=>({x:e.x,y:e.y-10})),e.preventDefault();break;case"ArrowLeft":m(e=>({x:e.x+10,y:e.y})),e.preventDefault();break;case"ArrowRight":m(e=>({x:e.x-10,y:e.y})),e.preventDefault()}},[]);(0,a.useEffect)(()=>(window.addEventListener("keydown",I),()=>{window.removeEventListener("keydown",I)}),[I]);let E=()=>{f(!1)},S=async()=>{let e=c.current;if(e)try{let t=(await r()(e)).toDataURL("image/png");return l&&l(t),t}catch(e){return console.error("Error taking screenshot:",e),null}};return(0,n.jsxs)("div",{className:"mandelbrot-container",children:[(0,n.jsxs)("div",{style:{position:"relative"},children:[(0,n.jsx)("canvas",{ref:c,width:t,height:s,onMouseDown:e=>{f(!0),w({x:e.clientX,y:e.clientY})},onMouseMove:e=>{if(!v)return;let t=e.clientX-b.x,s=e.clientY-b.y;m(e=>({x:e.x+t,y:e.y+s})),w({x:e.clientX,y:e.clientY})},onMouseUp:E,onMouseLeave:E,onWheel:e=>{e.preventDefault();let t=c.current;if(!t)return;let s=t.getBoundingClientRect(),n=N(e.clientX-s.left,e.clientY-s.top),a=e.deltaY<0?1.2:.8;x({x:n.real,y:n.imag}),y(g*a),m({x:0,y:0})},style:{cursor:v?"grabbing":"grab",border:"2px solid #8A2BE2",backgroundColor:"#000000",borderRadius:"4px"}}),(0,n.jsx)(o,{onZoom:(e,t)=>{if(!c.current)return;let s=N(e,t);x({x:s.real,y:s.imag}),y(1.5*g),m({x:0,y:0})},width:t,height:s})]}),(0,n.jsxs)("div",{className:"controls",children:[(0,n.jsx)("button",{onClick:()=>{x({x:0,y:0}),y(1),m({x:0,y:0})},disabled:d,className:"reset-button",children:"Reset View"}),(0,n.jsx)("button",{onClick:S,disabled:d,className:"screenshot-button",children:"Take Screenshot"})]}),d&&(0,n.jsx)("div",{className:"rendering-indicator",children:"Rendering..."})]})}var c=s(8384);function d(e){let{width:t=800,height:s=600,maxIterations:i=100}=e,[r,o]=(0,a.useState)(null),[d,h]=(0,a.useState)(null),[u,x]=(0,a.useState)(!1),[g,y]=(0,a.useState)(""),[p,m]=(0,a.useState)(!1),v=async()=>{if(r&&g){x(!0);try{var e,t;let s=new c.z4({apiKey:g,dangerouslyAllowBrowser:!0}),n=await s.chat.completions.create({model:"gpt-4-vision-preview",messages:[{role:"user",content:[{type:"text",text:"Analyze this Mandelbrot set visualization and identify the most visually interesting or complex region that would be worth zooming into. Provide coordinates or describe the location relative to visible features. Be specific about where to look and why it's interesting."},{type:"image_url",image_url:{url:r}}]}],max_tokens:300}),a=(null===(t=n.choices[0])||void 0===t?void 0:null===(e=t.message)||void 0===e?void 0:e.content)||"No suggestion available";h(a)}catch(e){console.error("Error analyzing screenshot:",e),h("Error analyzing the image. Please try again or check your API key.")}finally{x(!1)}}};return(0,n.jsxs)("div",{className:"mandelbrot-viewer",children:[(0,n.jsxs)("div",{className:"viewer-header",children:[(0,n.jsx)("h1",{children:"AlmndBrd-Mandelbrot Explorer"}),(0,n.jsx)("p",{children:"Explore the Mandelbrot set by zooming and panning. Use the mouse wheel to zoom, drag to pan, arrow keys for precise movement, and the magnifying glass for targeted zooming."})]}),(0,n.jsxs)("div",{className:"viewer-content",children:[(0,n.jsx)("div",{className:"canvas-container",children:(0,n.jsx)(l,{width:t,height:s,maxIterations:i,onScreenshotTaken:e=>{o(e),h(null)}})}),(0,n.jsxs)("div",{className:"controls-panel",children:[(0,n.jsxs)("div",{className:"api-key-section",children:[(0,n.jsx)("button",{onClick:()=>{m(!p)},className:"api-key-toggle",children:p?"Hide API Key Input":"Set OpenAI API Key"}),p&&(0,n.jsxs)("div",{className:"api-key-input-container",children:[(0,n.jsx)("input",{type:"password",value:g,onChange:e=>y(e.target.value),placeholder:"Enter your OpenAI API key",className:"api-key-input"}),(0,n.jsx)("p",{className:"api-key-note",children:"Note: Your API key is stored only in your browser and is not sent to our servers."})]})]}),(0,n.jsxs)("div",{className:"genai-section",children:[(0,n.jsx)("h3",{children:"GenAI Exploration Assistant"}),(0,n.jsx)("p",{children:"Let AI help you discover interesting areas in the fractal."}),r&&(0,n.jsxs)("div",{className:"screenshot-preview",children:[(0,n.jsx)("h4",{children:"Current Screenshot"}),(0,n.jsx)("img",{src:r,alt:"Mandelbrot screenshot",style:{maxWidth:"100%",maxHeight:"200px"}}),(0,n.jsx)("button",{onClick:v,disabled:u||!g,className:"analyze-button",children:u?"Analyzing...":"Analyze with AI"}),!g&&(0,n.jsx)("p",{className:"api-key-warning",children:"Please set your OpenAI API key to use the AI analysis feature."})]}),d&&(0,n.jsxs)("div",{className:"ai-suggestion",children:[(0,n.jsx)("h4",{children:"AI Suggestion"}),(0,n.jsx)("div",{className:"suggestion-content",children:d})]})]})]})]})]})}s(5657);var h=s(9471),u=s.n(h);function x(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u(),{children:(0,n.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Russo+One&display=swap",rel:"stylesheet"})}),(0,n.jsx)("div",{className:"mandelbrot-page",children:(0,n.jsx)(d,{width:800,height:600,maxIterations:150})})]})}},5657:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[485,669,454,634,775,358],()=>t(4243)),_N_E=e.O()}]);